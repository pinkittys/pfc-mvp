# ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë° í”Œë¡œìš°ì°¨íŠ¸

## **1. ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜**

```mermaid
graph TB
    subgraph "Frontend Layer"
        UI[ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤<br/>HTML/JavaScript]
        WS[WebSocket í´ë¼ì´ì–¸íŠ¸]
    end
    
    subgraph "API Gateway Layer"
        FastAPI[FastAPI ì„œë²„<br/>uvicorn]
        Router[API ë¼ìš°í„°]
    end
    
    subgraph "Core Services Layer"
        SmartExtractor[SmartWebSocketExtractor<br/>ìŠ¤ë§ˆíŠ¸ í‚¤ì›Œë“œ ì¶”ì¶œ]
        FlowerMatcher[FlowerMatcher<br/>ê½ƒ ë§¤ì¹­ ì—”ì§„]
        EmotionAnalyzer[EmotionAnalyzer<br/>ê°ì • ë¶„ì„]
        StoryManager[StoryManager<br/>ìŠ¤í† ë¦¬ ê´€ë¦¬]
    end
    
    subgraph "External Services"
        OpenAI[OpenAI API<br/>GPT-4o-mini]
        GoogleDrive[Google Drive API<br/>ì´ë¯¸ì§€ ë™ê¸°í™”]
        GoogleSheet[Google Spreadsheet<br/>ê½ƒ ë©”íƒ€ë°ì´í„°]
    end
    
    subgraph "Data Layer"
        Supabase[(Supabase<br/>ë°ì´í„°ë² ì´ìŠ¤)]
        LocalFS[ë¡œì»¬ íŒŒì¼ì‹œìŠ¤í…œ<br/>ì´ë¯¸ì§€/ë°ì´í„°]
    end
    
    UI --> WS
    WS --> FastAPI
    FastAPI --> Router
    Router --> SmartExtractor
    SmartExtractor --> OpenAI
    SmartExtractor --> FlowerMatcher
    FlowerMatcher --> GoogleSheet
    FlowerMatcher --> EmotionAnalyzer
    EmotionAnalyzer --> OpenAI
    StoryManager --> Supabase
    GoogleDrive --> LocalFS
    GoogleSheet --> LocalFS
```

## **2. ì‹¤ì‹œê°„ í‚¤ì›Œë“œ ì¶”ì¶œ í”Œë¡œìš°**

```mermaid
flowchart TD
    A[ì‚¬ìš©ì íƒ€ì´í•‘] --> B{í…ìŠ¤íŠ¸ ê¸¸ì´ ì²´í¬}
    
    B -->|10ì ë¯¸ë§Œ| C[ê·œì¹™ ê¸°ë°˜ ì¶”ì¶œ<br/>ë¹ ë¦„, ë‚®ì€ ì •í™•ë„]
    B -->|10-30ì| D[ê°„ë‹¨í•œ LLM ì¶”ì¶œ<br/>ì¤‘ê°„ ì†ë„, ì¤‘ê°„ ì •í™•ë„]
    B -->|30ì ì´ìƒ| E[ì „ì²´ LLM ì¶”ì¶œ<br/>ëŠë¦¼, ë†’ì€ ì •í™•ë„]
    
    C --> F[í‚¤ì›Œë“œ ê²°ê³¼ ìƒì„±]
    D --> F
    E --> F
    
    F --> G[ë§¥ë½ ê¸°ë°˜ ëŒ€ì•ˆ í‚¤ì›Œë“œ ìƒì„±]
    G --> H[WebSocketìœ¼ë¡œ ì‹¤ì‹œê°„ ì „ì†¡]
    
    H --> I[ì‚¬ìš©ì UI ì—…ë°ì´íŠ¸]
    I --> J{ì‚¬ìš©ì ì„ íƒ ì™„ë£Œ?}
    
    J -->|No| A
    J -->|Yes| K[ìµœì¢… í‚¤ì›Œë“œ í™•ì •]
    
    K --> L[ê½ƒ ì¶”ì²œ ìš”ì²­]
```

## **3. ê½ƒ ë§¤ì¹­ ì—”ì§„ í”Œë¡œìš°**

```mermaid
flowchart TD
    A[ì‚¬ìš©ì ì„ íƒ í‚¤ì›Œë“œ] --> B[1ì°¨ í•„í„°ë§<br/>ê°ì •/ìƒí™©/ë¬´ë“œ ê¸°ë°˜]
    
    B --> C[ê½ƒ í’€ ìƒì„±<br/>ê¸°ë³¸ ë§¤ì¹­ ê²°ê³¼]
    
    C --> D[2ì°¨ í•„í„°ë§<br/>ìƒ‰ìƒ/ê³„ì ˆ/ê½ƒì˜ ì˜ë¯¸]
    
    D --> E[ì •ë°€ ë§¤ì¹­ ê²°ê³¼<br/>ìƒìœ„ í›„ë³´ ì„ ë³„]
    
    E --> F[3ì°¨ í•„í„°ë§<br/>ì‚¬ìš©ì ì œì™¸ í‚¤ì›Œë“œ ë°˜ì˜]
    
    F --> G[ìµœì¢… ì¶”ì²œ ê½ƒ ì„ ì •]
    
    G --> H[ì¶”ì²œ ì´ìœ  ìƒì„±<br/>LLM ê¸°ë°˜]
    
    H --> I[ì˜ì–´ ê½ƒ ì¹´ë“œ ë©”ì‹œì§€ ìƒì„±]
    
    I --> J[ê²°ê³¼ ë°˜í™˜ + ìŠ¤í† ë¦¬ ì €ì¥]
```

## **4. ë°ì´í„° íë¦„ íŒŒì´í”„ë¼ì¸**

```mermaid
sequenceDiagram
    participant User as ì‚¬ìš©ì
    participant WS as WebSocket
    participant API as FastAPI
    participant AI as OpenAI
    participant DB as Supabase
    
    User->>WS: ì´ì•¼ê¸° ì…ë ¥ ì‹œì‘
    WS->>API: ì‹¤ì‹œê°„ í‚¤ì›Œë“œ ì¶”ì¶œ ìš”ì²­
    API->>AI: LLM ê¸°ë°˜ í‚¤ì›Œë“œ ì¶”ì¶œ
    AI-->>API: í‚¤ì›Œë“œ ê²°ê³¼
    API-->>WS: ì‹¤ì‹œê°„ í‚¤ì›Œë“œ ì „ì†¡
    WS-->>User: í‚¤ì›Œë“œ UI ì—…ë°ì´íŠ¸
    
    User->>WS: ì´ì•¼ê¸° ì™„ì„±
    WS->>API: ìµœì¢… í‚¤ì›Œë“œ í™•ì •
    API->>API: ê½ƒ ë§¤ì¹­ ì—”ì§„ ì‹¤í–‰
    API->>AI: ì¶”ì²œ ì´ìœ  ìƒì„±
    AI-->>API: ì¶”ì²œ ì´ìœ  + ì˜ì–´ ë©”ì‹œì§€
    API->>DB: ìŠ¤í† ë¦¬ ë°ì´í„° ì €ì¥
    API-->>WS: ìµœì¢… ì¶”ì²œ ê²°ê³¼
    WS-->>User: ê½ƒ ì¶”ì²œ ê²°ê³¼ í‘œì‹œ
```

## **5. ìŠ¤ë§ˆíŠ¸ ì¶”ì¶œ ì „ëµ ë§¤íŠ¸ë¦­ìŠ¤**

```mermaid
graph LR
    subgraph "í…ìŠ¤íŠ¸ ê¸¸ì´ë³„ ì¶”ì¶œ ì „ëµ"
        A[10ì ë¯¸ë§Œ<br/>ê·œì¹™ ê¸°ë°˜<br/>ë¹ ë¦„<br/>ì •í™•ë„ 60-70%]
        B[10-30ì<br/>ê°„ë‹¨í•œ LLM<br/>ì¤‘ê°„ ì†ë„<br/>ì •í™•ë„ 70-80%]
        C[30ì ì´ìƒ<br/>ì „ì²´ LLM<br/>ëŠë¦¼<br/>ì •í™•ë„ 85-95%]
    end
    
    A --> D[ì¦‰ì‹œ ì‘ë‹µ]
    B --> E[1-2ì´ˆ ì‘ë‹µ]
    C --> F[2-3ì´ˆ ì‘ë‹µ]
    
    D --> G[ì‚¬ìš©ì ê²½í—˜: ë¹ ë¥¸ í”¼ë“œë°±]
    E --> H[ì‚¬ìš©ì ê²½í—˜: ê· í˜•ì¡íŒ ì‘ë‹µ]
    F --> I[ì‚¬ìš©ì ê²½í—˜: ì •í™•í•œ ê²°ê³¼]
```

## **6. ë§¥ë½ ê¸°ë°˜ í‚¤ì›Œë“œ ìƒì„± ì˜ˆì‹œ**

```mermaid
graph TD
    A[ì‚¬ìš©ì ì…ë ¥: "ì¹œêµ¬ ìƒì¼ ì¶•í•˜í•˜ê³  ì‹¶ì–´ìš”"] --> B[ê°ì • ì¶”ì¶œ: "ê¸°ì¨"]
    
    B --> C[ìƒí™© ì°¸ì¡°: "ìƒì¼"]
    C --> D[ê°ì • ëŒ€ì•ˆ ìƒì„±: "ì‚¬ë‘", "ì„¤ë ˜"]
    
    A --> E[ìƒ‰ìƒ ì¶”ì¶œ: "í•‘í¬"]
    E --> F[ê°ì • ì°¸ì¡°: "ê¸°ì¨"]
    F --> G[ìƒ‰ìƒ ëŒ€ì•ˆ ìƒì„±: "ë¼ì¼ë½", "í™”ì´íŠ¸"]
    
    A --> H[ë¬´ë“œ ì¶”ì¶œ: "ë”°ëœ»í•œ"]
    H --> I[ê°ì • ì°¸ì¡°: "ê¸°ì¨"]
    I --> J[ë¬´ë“œ ëŒ€ì•ˆ ìƒì„±: "ê²½ì¾Œí•œ", "ë°ì€"]
    
    D --> K[ìµœì¢… ê°ì •: ê¸°ì¨ + ì‚¬ë‘, ì„¤ë ˜]
    G --> L[ìµœì¢… ìƒ‰ìƒ: í•‘í¬ + ë¼ì¼ë½, í™”ì´íŠ¸]
    J --> M[ìµœì¢… ë¬´ë“œ: ë”°ëœ»í•œ + ê²½ì¾Œí•œ, ë°ì€]
```

## **7. ì‹œìŠ¤í…œ ì„±ëŠ¥ ì§€í‘œ**

```mermaid
pie title ì‹œìŠ¤í…œ ì‘ë‹µ ì†ë„ ë¶„í¬
    "ê·œì¹™ ê¸°ë°˜ (10ì ë¯¸ë§Œ)" : 15
    "ê°„ë‹¨í•œ LLM (10-30ì)" : 35
    "ì „ì²´ LLM (30ì ì´ìƒ)" : 50
```

```mermaid
pie title ì‹œìŠ¤í…œ ì •í™•ë„ ë¶„í¬
    "ê·œì¹™ ê¸°ë°˜" : 25
    "ê°„ë‹¨í•œ LLM" : 30
    "ì „ì²´ LLM" : 45
```

## **8. ê°œë°œ ì™„ì„±ë„ í˜„í™©**

```mermaid
gantt
    title ê°œë°œ ì™„ì„±ë„ í˜„í™©
    dateFormat  YYYY-MM-DD
    section ë°ì´í„° êµ¬ì¶•
    ê½ƒ ë©”íƒ€ë°ì´í„° êµ¬ì¶•    :done, data1, 2024-12-01, 2024-12-05
    ê½ƒ ì´ë¯¸ì§€ ë°ì´í„° êµ¬ì¶•  :done, data2, 2024-12-01, 2024-12-10
    ìƒ˜í”Œ ìŠ¤í† ë¦¬ ìƒì„±      :done, data3, 2024-12-05, 2024-12-15
    
    section ë°±ì—”ë“œ ê°œë°œ
    FastAPI ì„œë²„ êµ¬ì¶•     :done, backend1, 2024-12-01, 2024-12-10
    AI ì¶”ì²œ ë¡œì§ êµ¬í˜„     :done, backend2, 2024-12-10, 2024-12-20
    WebSocket ì‹¤ì‹œê°„ ì²˜ë¦¬  :done, backend3, 2024-12-15, 2024-12-25
    
    section ì‹œìŠ¤í…œ í†µí•©
    API ì—”ë“œí¬ì¸íŠ¸ í†µí•©    :done, integration1, 2024-12-20, 2024-12-28
    ì„±ëŠ¥ ìµœì í™”          :done, integration2, 2024-12-25, 2024-12-30
    í…ŒìŠ¤íŠ¸ ë° ë°°í¬        :done, integration3, 2024-12-28, 2024-12-31
```

---

**ì´ ë‹¤ì´ì–´ê·¸ë¨ë“¤ì€ Floiy-Reco ì‹œìŠ¤í…œì˜ ì „ì²´ì ì¸ êµ¬ì¡°ì™€ ë°ì´í„° íë¦„ì„ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.** ğŸ¯âœ¨
